(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{166:function(t,a,s){t.exports=s.p+"assets/img/4.65262032.jpg"},186:function(t,a,s){"use strict";s.r(a);var e=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"controller"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#controller","aria-hidden":"true"}},[t._v("#")]),t._v(" Controller")]),t._v(" "),e("p",[t._v("As a minimalist framework that mimics Sinatra, Pinatra does not provide the "),e("code",[t._v("Controller")]),t._v(" and "),e("code",[t._v("Model")]),t._v(" base components by default, but can be implemented with a simple DIY.")]),t._v(" "),e("p",[t._v("Below I will show how to use controllers in the Pinatra framework.")]),t._v(" "),e("h2",{attrs:{id:"the-basic-design-of-controllers-in-routing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-basic-design-of-controllers-in-routing","aria-hidden":"true"}},[t._v("#")]),t._v(" The basic design of controllers in routing")]),t._v(" "),e("p",[t._v("Pinatra routing provides a very simple way to call "),e("code",[t._v("Controller@method")]),t._v(", which is followed by the following simple steps:")]),t._v(" "),e("ol",[e("li",[t._v("Define the root namespace of the controller. The default is '\\', which is the root space.")]),t._v(" "),e("li",[t._v("When you get a response request like "),e("code",[t._v("Controller@method")]),t._v(", new a object, then call the method and pass in the parameters.")])]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{attrs:{class:"token comment"}},[t._v("// Fake code")]),t._v("\n"),e("span",{attrs:{class:"token variable"}},[t._v("$a")]),t._v(" "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token variable"}},[t._v("$baseNameSpace")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token variable"}},[t._v("$controller")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{attrs:{class:"token comment"}},[t._v("// '\\NameSpace\\HomeController';")]),t._v("\n"),e("span",{attrs:{class:"token variable"}},[t._v("$b")]),t._v(" "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token variable"}},[t._v("$method")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{attrs:{class:"token comment"}},[t._v("// 'home'")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{attrs:{class:"token variable"}},[t._v("$a")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token operator"}},[t._v("-")]),e("span",{attrs:{class:"token operator"}},[t._v(">")]),e("span",{attrs:{class:"token variable"}},[t._v("$method")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token variable"}},[t._v("$a")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{attrs:{class:"token variable"}},[t._v("$b")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{attrs:{class:"token variable"}},[t._v("$c")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"using-the-controller"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-controller","aria-hidden":"true"}},[t._v("#")]),t._v(" Using the controller")]),t._v(" "),e("p",[t._v("It takes three steps to load the controller into Pinatra.")]),t._v(" "),e("h2",{attrs:{id:"_1-setting-up-a-namespace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-setting-up-a-namespace","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. Setting up a namespace")]),t._v(" "),e("p",[t._v("The main purpose of setting up a namespace is to autoload, which is to let us not need to manually require the file before calling the class.")]),t._v(" "),e("p",[t._v("The PSR-4 specification is to make the namespace as the same structure of the folder and file name, the most trouble-free. The PSR-0 specification allows each file to be set internally, with the disadvantage of rerun "),e("code",[t._v("composer dump-autoload")]),t._v(" for each modification.")]),t._v(" "),e("p",[t._v("Pinatra recommends the PSR-4 autoloading specification as follows.")]),t._v(" "),e("blockquote",[e("ol",[e("li",[t._v("New controllers folder at the same level as the public folder")]),t._v(" "),e("li",[t._v("Modify composer.json to add the following:")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{attrs:{class:"token property"}},[t._v('"autoload"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{attrs:{class:"token property"}},[t._v('"psr-4"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{attrs:{class:"token property"}},[t._v('"Controllers\\\\"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"controllers/"')]),t._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Run the command "),e("code",[t._v("composer dump-autoload")])])])]),t._v(" "),e("h2",{attrs:{id:"_2-let-pinatra-know"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-let-pinatra-know","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. Let Pinatra know")]),t._v(" "),e("p",[t._v("Add a line of code to "),e("code",[t._v("public/index.php")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[t._v("\\"),e("span",{attrs:{class:"token package"}},[t._v("Pinatra"),e("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Routing"),e("span",{attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Router")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{attrs:{class:"token variable"}},[t._v("$baseNamespace")]),t._v(" "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'\\\\Controllers\\\\'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"_3-try-it"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-try-it","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. try it")]),t._v(" "),e("h3",{attrs:{id:"creating-a-controller"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-controller","aria-hidden":"true"}},[t._v("#")]),t._v(" Creating a controller")]),t._v(" "),e("p",[t._v("Create a "),e("code",[t._v("controllers/HomeController.php")]),t._v(" file with the following contents:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{attrs:{class:"token php language-php"}},[e("span",{attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),e("span",{attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),e("span",{attrs:{class:"token package"}},[t._v("Controllers")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{attrs:{class:"token class-name"}},[t._v("HomeController")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{attrs:{class:"token function"}},[t._v("home")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),e("span",{attrs:{class:"token double-quoted-string string"}},[t._v('"Welcome to homepage!"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),e("h3",{attrs:{id:"create-a-route"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-route","aria-hidden":"true"}},[t._v("#")]),t._v(" Create a route")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{attrs:{class:"token function"}},[t._v("get")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'home'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'HomeController@home'")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"test-results"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#test-results","aria-hidden":"true"}},[t._v("#")]),t._v(" Test results")]),t._v(" "),e("p",[t._v("Visit "),e("code",[t._v("http://0.0.0.0:8000/home")]),t._v(" to get the following page, success!")]),t._v(" "),e("p",[e("img",{attrs:{src:s(166),alt:"controller"}})])])}],n=s(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},e,!1,null,null,null);o.options.__file="controller.md";a.default=o.exports}}]);